<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <meta name="google-signin-scope" content="profile email"></meta>
    <meta name="google-signin-client_id"
          content="85390473584-aead42mt4mhtf5d2brevqd0dan46s0d7.apps.googleusercontent.com"></meta>

    <title>PokeMongo</title>

    <h:outputStylesheet library="css" name="normalize.css"></h:outputStylesheet>
    <h:outputStylesheet library="css" name="main.css"></h:outputStylesheet>

    <script src="https://apis.google.com/js/platform.js" async="async" defer="defer"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <h:outputStylesheet library="css" name="normalize.css"></h:outputStylesheet>
    <h:outputStylesheet library="css" name="main.css"></h:outputStylesheet>

</h:head>
<h:body>

    <!-- NavBar -->
    <b:navBar brand="PokeMongo" brandHref="#" position="top" sticky="false">
        <b:navbarLinks>
            <b:navLink value="PokePortal" href="#"></b:navLink>
            <b:navLink value="My Profile" href="#"></b:navLink>

        </b:navbarLinks>
        <b:navbarLinks pull="right">
            <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
            <a href="#" onclick="signOut();">Sign out</a>
        </b:navbarLinks>
    </b:navBar>

    <b:container>
        <b:row>

            <!--Left Section-->
            <b:column mediumScreen="6" styleClass="leftSection">

                <b:row>
                    <b:column mediumScreen="12">

                        <!-- New Post Form -->
                        <h:form id="postForm">
                            <h:messages></h:messages>
                            <b:inputText placeholder="Post title" id="title" value="#{postController.title}"/>
                            <b:inputTextarea placeholder="Write new post..." id="content"
                                             value="#{postController.content}"/>
                            <b:commandButton value="Post!" look="primary" action="#{postController.savePost()}"/>
                        </h:form>
                    </b:column>
                </b:row>

                <b:row>
                    <b:column mediumScreen="12">
                        <h:form>
                            <ul>
                                <ui:repeat value="#{postController.postsWithoutParent}" var="post">
                                    <li><h:outputText value="#{post.title}"/><h:outputText value="#{post.id}"/></li>
                                    <ul>
                                        <ui:repeat value="#{post.childPosts}" var="child">
                                            <li><h:outputText value="#{child.title}"/></li>
                                        </ui:repeat>
                                    </ul>
                                </ui:repeat>
                            </ul>
                        </h:form>
                    </b:column>
                </b:row>

            </b:column>

            <!--Right Section-->
            <b:column mediumScreen="6" styleClass="rightSection"></b:column>
        </b:row>
    </b:container>

    <h:form id="hiddenGoogleLoginForm">
        <h:inputText id="userName" value="#{userController.userName}"></h:inputText>
        <h:inputText id="email" value="#{userController.email}"></h:inputText>
        <h:inputText id="tokenId" value="#{userController.tokenId}"></h:inputText>
        <b:commandButton styleClass="submitButton" ajax="true" update="@none"
                         action="#{userController.saveUser}"></b:commandButton>
        <b:commandButton styleClass="logOutButton" ajax="true" update="@none"
                         action="#{userController.logOutUser}"></b:commandButton>
    </h:form>


</h:body>

<h:outputScript library="js" name="googleLogin.js"></h:outputScript>

</html>